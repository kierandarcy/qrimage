{% extends "bootstrap_responsive.html" %}
{% import "bootstrap_wtf.html" as wtf %}

{% set title = 'Qrimage' %}
{% set navigation_bar = [
    ('home', 'Home'),
    ('coffee', 'Brew some coffee'),
    ('create', 'Create a QR code'),
    ('user_qrcodes', 'Saved QR codes'),
] %}
{% set active_page = active_page|default('home') -%}

{% block style %}
    {{ super() }}
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
{% endblock %}

{% block favicons %}
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
{% endblock %}

{% block body_content %}
    {% block navbar %}
        <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    {%- for line in navigation_bar %}
                        <span class="icon-bar"></span>
                    {%- endfor %}
                    </a>

                    <a class="brand" href="{{ url_for('home') }}">{{ title }}</a>
                    <div class="nav-collapse">
                        <ul class="nav">
                        {%- for view_name, view_title in navigation_bar %}
                            <li{% if view_name == active_page %} class="active"{% endif %}><a href="{{ url_for(view_name) }}">{{ view_title }}</a></li>
                        {%- endfor %}
                        {% if current_user.is_authenticated() %}
                            <li><a href="{{ url_for('logout') }}">Log out {{ current_user.name }}</a></li>
                        {% else %}
                            <li><a href="{{ url_for('login') }}">Log in</a></li>
                        {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    {% endblock %}

    {% block flashes %}
        {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
                <div class="flashes container">
                    {% for category, message in get_flashed_messages(with_categories=True) %}
                        <div class="alert alert-{{ category }}">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    {% endblock %}

    <header>
    {% block header %}
    {% endblock %}
    </header>

    {% block content %}
    {% endblock %}
{% endblock %}

